language: cpp
install: 
  - cd ..
  - mkdir libs && cd libs
  - mkdir fmod && cd fmod
  - cp ../../fmod-gdnative/getFmodAPIScript.sh ./
  - ./getFmodAPIScript.sh $FMODUSER $FMODPASS
  - tar -xvf fmodstudioapi11012linux.tar.gz
  - mv fmodstudioapi11012linux linux
  - cd ../../
  - git clone --recursive  https://github.com/utopia-rise/godot-cpp godot-cpp
  - cd godot-cpp
  - git checkout 3.1-utopia
jobs:
  include:
    - stage: "bindings"
      name: "Generates and build bindings"
      script: ./scons-generate-linux.sh && cd ../fmod-gdnative
    - stage: "fmod-gdnative"
      name: "Buile fmod-gdnative"
      script: scons p=linux use_llvm=yes
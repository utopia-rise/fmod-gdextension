language: cpp
compiler:
  - clang
before_install:
  - cd ..
  - mkdir libs && cd libs
  - mkdir fmod && cd fmod
  - cp ../../fmod-gdnative/getFmodAPIScript.sh ./
  - ./getFmodAPIScript.sh $FMODUSER $FMODPASS
  - tar -xvf fmodstudioapi11012linux.tar.gz
  - mv fmodstudioapi11012linux linux
  - cd ../../
  - git clone --recursive  https://github.com/utopia-rise/godot-cpp godot-cpp
  - cd godot-cpp
  - git checkout 3.1-utopia
jobs:
  include:
    - stage: "bindings"
      name: "Generates and build bindings"
      install:
        - scons godotbinpath="~/Documents/Godot_v3.1-stable_x11.64" use_llvm=yes  platform=linux generate_bindings=yes bits=64 target=release clang-path=/usr/local/clang-5.0.0/bin/ && cd ../fmod-gdnative
    - stage: "fmod-gdnative"
      name: "Buile fmod-gdnative"
      script: scons p=linux use_llvm=yes